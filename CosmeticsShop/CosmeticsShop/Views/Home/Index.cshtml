@{
    ViewBag.Title = "Trang chủ";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";

    List<CosmeticsShop.Models.Product> products = ViewBag.ListProduct as List<CosmeticsShop.Models.Product>;
}
<style>
    .table th, .table td {
        color: #000 !important;
        vertical-align: middle !important;
    }
</style>
<script>
    // Xóa đoạn script click thêm giỏ hàng vì nút không còn chức năng add nữa
</script>

<!-- Banner -->
<div class="banner" style="margin-bottom: 30px;">
    <img src="~/Content/images/banner.jpg" alt="Banner" class="img-responsive" style="width: 100%; height: 450px; object-fit: cover;">
</div>

<!-- Sản phẩm bán chạy -->
<div class="container">
    <h2 class="text-center" style="margin-bottom: 40px; color: #6f4e7c; font-weight: 700;">Sản phẩm bán chạy</h2>
    <div class="row">
        @if (products != null && products.Count > 0)
        {
            var topProducts = products.OrderByDescending(p => p.PurchasedCount).Take(8).ToList();
            foreach (var product in topProducts)
            {
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail" style="border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); height: 100%; display: flex; flex-direction: column;">
                        <a href="/Product/Details/@product.ID">
                            <img src="~/Content/images/@product.Image1" alt="@product.Name" style="height: 230px; object-fit: cover; border-top-left-radius: 10px; border-top-right-radius: 10px;" class="img-responsive" />
                        </a>
                        <div class="caption" style="flex-grow: 1;">
                            <h4 style="color: #6f4e7c; font-weight: 600; min-height: 48px;">
                                <a href="/Product/Details/@product.ID" style="color: #6f4e7c; text-decoration: none;">@product.Name</a>
                            </h4>
                            <p style="color: #d98fb3; font-weight: 700; font-size: 18px; margin-bottom: 10px;">
                                @product.Price.Value.ToString("#,##0")₫
                            </p>
                            <p style="font-size: 13px; color: #777;">
                                Đã bán: @product.PurchasedCount<br />
                                Còn lại: @product.Quantity
                            </p>
                        </div>
                        <div style="padding: 0 15px 15px 15px;">
                            <a href="/Product/Details/@product.ID" class="btn btn-block btn-primary" style="background-color: #a46f8e; border-color: #a46f8e; text-align:center;">
                                Xem chi tiết
                            </a>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="col-xs-12">
                <h3 class="text-center text-muted">Không có sản phẩm nào...</h3>
            </div>
        }
    </div>
</div>
